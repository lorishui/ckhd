<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.ckhd.opengame.game.dao.GiftDescDao">
 
	<insert id="insert">
		INSERT INTO t_gift_desc(
			id,
			ckAppId,
			ckChannelId,
			giftId,
			number,
			giftDesc,
			batch,
			startTime,
			endTime
		) VALUES (
			#{id},
			#{ckAppId},
			#{ckChannelId},
			#{giftId},
			#{number},
			#{giftDesc},
			#{batch},
			#{startTime},
			#{endTime}
		)
	</insert>
	
	<update id="update">
		UPDATE	t_gift_desc SET 
		ckAppId=#{ckAppId},
		ckChannelId=#{ckChannelId},
		giftId=#{giftId},
		number=#{number},
		actNumber=#{actNumber},
		batch=#{batch},
		giftDesc=#{giftDesc},
		startTime=#{startTime},
		endTime=#{endTime}
		WHERE id = #{id}
	</update>
	
	<!-- 分页查询信息 -->
	<select id="findList" resultType="GiftDesc">
		SELECT a.*,b.name
		FROM  t_gift_desc a
		LEFT JOIN t_gift b ON (b.`parentNode`=0 and a.`giftId`=b.id and a.ckAppId=b.ckAppId)
		WHERE 1=1
		<if test="ckAppId != null and ckAppId != ''">
			AND a.ckAppid = #{ckAppId}
		</if>
		<if test="name != null and name != ''">
			AND a.name like '%${name}%'
		</if>
		<if test="ckChannelId != null and ckChannelId != ''">
			AND a.ckChannelId like '%${ckChannelId}%'
		</if>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.id
			</otherwise>
		</choose>
	</select>
	
	<select id="get" resultType="GiftDesc">
		SELECT *
		FROM t_gift_desc a
		WHERE a.id = #{id}
	</select>
	
	<update id="updateGenerate">
		UPDATE	t_gift_desc SET 
		isGenerate=1
		WHERE id = #{id}
	</update>
</mapper>