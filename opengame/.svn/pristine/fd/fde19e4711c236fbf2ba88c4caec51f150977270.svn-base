<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.ckhd.opengame.stats.dao.GameReportDao">
	<insert id="insert">
		INSERT INTO
		game_report(id,ckappid,date,create_date) VALUES
		(#{id},#{ckAppId},#{date},#{createDate})
	</insert>
	
	<update id="updateSucc">
		update game_report set status='1', data=#{data,jdbcType=BLOB} where id =#{id}
	</update>
	
	<update id="updateFail">
		update game_report set status='2' where id =#{id}
	</update>
	
	<select id="findData" resultType="GameReport">
		SELECT ckappid,date,data
		FROM game_report where id=#{id}
	</select>
	
	<select id="findList" resultType="GameReport">
		SELECT id,ckappid,date,create_date,status
		FROM game_report where ckappid=#{ckAppId} and date=#{date} and del_flag='0'
		order by create_date desc limit 0,5
	</select>
	
	<select id="countTask" resultType="int">
		select count(0) as num from game_report where ckappid=#{ckAppId} and date=#{date} and status='0';
	</select>
</mapper>