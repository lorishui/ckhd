package me.ckhd.opengame.drds.task;

import java.net.InetAddress;

import me.ckhd.opengame.common.config.Global;
import me.ckhd.opengame.stats.task.ActUsersCountTask;
import me.ckhd.opengame.stats.task.NewUsersCountTask;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class CountJob {
	
	Logger logger = LoggerFactory.getLogger(DrdsQtzJob.class);
	
	protected void execute(){
		try {
			String localHost = InetAddress.getLocalHost().getHostAddress();
			if(!localHost.endsWith(Global.getConfig("count.serverIp"))){
				return ;
			}
			System.out.println(" count start!!");
			NewUsersCountTask.countNewUsers();
			ActUsersCountTask.countActUsers();  
		} catch (Throwable e) {
			logger.error("统计 count is error!", e);
		}
	}
}
