<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.ckhd.opengame.game.dao.GoodsDao">
 
	<insert id="insert">
		INSERT INTO t_goods(
			id,
			ckAppId,
			name,
			isUse
		) VALUES (
			#{newId},
			#{ckAppId},
			#{name},
			#{isUse}
		)
	</insert>
	
	<update id="update">
		UPDATE	t_goods SET 
			id=#{newId} 
			<if test="name != null and name != ''">
			,name=#{name}
			</if>
			<if test="ckAppId != null and ckAppId != ''">
			,ckAppId=#{ckAppId}
			</if>
			<if test="isUse != null and isUse != ''">
			,isUse=#{isUse}
			</if>
		WHERE id = #{id} and ckAppId=#{ckAppId}
	</update>
	
	<!-- 分页查询信息 -->
	<select id="findList" resultType="Goods">
		SELECT *
		FROM  t_goods a
		WHERE 1=1
		<if test="ckAppId != null and ckAppId != ''">
			AND a.ckAppid = #{ckAppId}
		</if>
		<if test="name != null and name != ''">
			AND a.name like '%${name}%'
		</if>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.id
			</otherwise>
		</choose>
	</select>
	
	<select id="get" resultType="Goods">
		SELECT *
		FROM t_goods a
		WHERE a.id = #{id} and a.ckAppId=#{ckAppId}
	</select>
	
	<update id="use">
		UPDATE	t_goods SET 
			isUse = #{isUse}
		WHERE id = #{id} and ckAppId=#{ckAppId}
	</update>
	
	<update id="delete">
		update t_goods set isUse=0 WHERE id = #{id} and ckAppId=#{ckAppId}
	</update>
	
</mapper>