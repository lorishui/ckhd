<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.ckhd.opengame.countly.dao.OrderForwardCountlyDao">
	<insert id="insert">
		INSERT INTO app_order_countly_forward(
		id,
		ck_appid,
		app_id,
		type,
		send_num,
		next_send_time,
		status,
		content,
		create_by,
		create_date,
		remarks
		) VALUES (
		#{id},
		#{ckappid},
		#{appid},
		#{type},
		#{sendNum},
		#{nextSendTime},
		#{status},
		#{content},
		#{createBy},
		#{createDate},
		#{remarks}
		)
	</insert>
	
    <!-- 根据id获得APPorder转发信息 -->
	<select id="get" resultType="OrderForwardCountly">
		SELECT
		id,
		ck_appid as ckappid,
		app_id as appid,
		type,
		send_num as sendNum,
		next_send_time as nextSendTime,
		status,
		content,
		create_by,
		create_date,
		remarks
		FROM app_order_countly_forward a
		WHERE a.id = #{id}
	</select>
	
	
	<select id="selectWaitSend" resultType="AppOrderForward">
		select *
		from app_order_countly_forward
		where
		next_send_time &lt;= #{nextSendTime}  
		and status='1' limit 10
	</select>
	
	
	<update id="updateSendFail">
		 update  app_order_countly_forward set 
		 send_num = #{sendNum},
		 next_send_time = #{nextSendTime},
		 status = #{status}
 		 where id = #{id}
	</update>
	<update id="updateSendSucess">
		update app_order_countly_forward set
		status = '0'
		where id = #{id}
	</update>
</mapper>