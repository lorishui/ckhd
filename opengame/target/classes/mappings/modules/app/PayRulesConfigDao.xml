<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.ckhd.opengame.app.dao.PayRulesConfigDao">
	<sql id="payRulesConfigColumns">
		a.id,
		a.pr_id,
		a.provinceids,
		a.carriers,
		a.money,
		a.totalmoney
	</sql>
	<!-- 新增支付通道省份配置 -->
	<insert id="insert">
		insert into app_payrules_config(
		id,
		pr_id,
		provinceids,
		carriers,
		money,
		totalmoney,
		create_date,
		create_by,
		update_date,
		update_by,
		del_flag,
		remarks
		) values(
		#{id},
		#{pr_id},
		#{provinceids},
		#{carriers},
		#{money},
		#{totalmoney},
		#{createDate},
		#{createBy.id},
		#{updateDate},
		#{updateBy.id},
		#{delFlag},
		#{remarks}
		);
	</insert>

	<!-- 分页获取数据 -->
	<select id="findList" resultType="payRulesConfig">
		select
		<include refid="payRulesConfigColumns" />
		from app_payrules_config a
		WHERE 1=1
		and a.del_flag= '0'
		and a.pr_id=#{id}
	</select>


	<!-- 更新支付通道切换配置 -->
	<update id="update">
		update app_payrules_config set
		<if test="provinceids != null and provinceids != ''">
			provinceids = #{provinceids},
		</if>
		<if test="carriers != null and carriers != ''">
			carriers = #{carriers},
		</if>
		<if test="money != null and money != ''">
			money = #{money},
		</if>
		<if test="totalmoney != null and totalmoney != ''">
			totalmoney = #{totalmoney},
		</if>
		update_date = #{updateDate},
		update_by = #{updateBy.id}
		where id = #{id}
	</update>

	<update id="delete">
		update app_payrules_config set del_flag = '1'
		WHERE id = #{id}
	</update>
	
	<select id="getPayRulesConfigByPayRulesId"  resultType="payRulesConfig">
	    select * from app_payrules_config where del_flag = '0' 
	    <if test="pr_id != null and pr_id != ''">
			 and pr_id=#{pr_id}
		</if>
	   
	</select>
</mapper>