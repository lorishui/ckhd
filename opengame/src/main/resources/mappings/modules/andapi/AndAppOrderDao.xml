<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.ckhd.opengame.andapi.dao.AndAPPOrderDao">
   
    
	<insert id="insert">
		INSERT INTO and_app_order(
		id,
		ckapp_id,
		userId,
		contentId,
		consumeCode,
		price,
		cpId,
		hRet,
		status,
		versionId,
		cpparam,
		packageID,
		create_date,
		create_by,
		remarks,
		provinceId,
		channelId,
		random
		) VALUES (
		#{id},
		(select ckapp_id from app_carriers where app_id=#{contentId} and carriers_type='ANDGAME' limit 0,1),
		#{userId},
		#{contentId},
		#{consumeCode},
		IFNULL((SELECT  price FROM app_paycode 
    		WHERE carriers_type = 'ANDGAME' 
      		AND paycode = #{consumeCode} and appid = #{contentId}
    		LIMIT 0, 1),2),
		#{cpId},
		#{hRet},
		#{status},
		#{versionId},
		#{cpparam},
		#{packageID},
		#{createDate},
		#{createBy},
		#{remarks},
		#{provinceId},
		#{channelId},
		#{random}
		)
	</insert>
</mapper>