package online;

import java.io.File;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import me.ckhd.opengame.common.utils.DateUtils;


public class UpdateComparedJSP1 {
	public static List<String> list = new ArrayList<String>();
	
	public static void main(String[] args) {
//		String url = "D:\\work\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp1\\wtpwebapps\\online";
		//class的獲取
		String url = "D:\\work\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp1\\wtpwebapps\\online";//D:\work\opengame
		String file_url = "D:\\work\\online\\src\\main\\webapp";
//		String url = "D:\\work\\opengame\\src\\main\\";
		File file = new File(file_url);
		compareDate(file, new Date(),url,file_url);
		for(int i=0;i<list.size();i++){
			System.out.println(list.get(i));
		}
		String des = "D:\\olgame";
		String fileName = "online_"+DateUtils.getDate("yyyyMMddHH")+"\\online";
		des = des+File.separator+fileName;
		File desFIle = new File(des);
		UpdateCompared.createFile(desFIle, url.length());
	}
	
	public static void compareDate(File file,Date date,String url,String file_url){
		if(file.exists()){
			if(file.isDirectory()){
				File[] arr = file.listFiles();
				for(File f:arr){
					compareDate(f, date, url,file_url);
				}
			}else if(file.isFile()){
//				System.out.println(file.getPath());
				long n = file.lastModified();
				if( date.getTime()-n <= 24*60*60*1000 ){
					list.add(file.getPath().replace(file_url, url));
				}
			}
		}
	}
	
}
